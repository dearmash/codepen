<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Princess</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            margin: 0;
            font-family: 'Inter', sans-serif;
            user-select: none;
        }

        /* Custom styles for the card, ensuring fixed aspect ratio on all devices */
        .card-container {
            width: 250px;
            height: 350px;
            max-width: 90vw;
            max-height: 126vw;
            transition: transform 0.2s ease-in-out;
            cursor: pointer;
        }
        .card-container:hover {
            transform: scale(1.05);
        }
        .red { color: #ef4444; } /* Tailwind's red-500 */
        .black { color: #1f2937; } /* Tailwind's gray-800 */
    </style>
</head>
<body class="bg-black">

    <div class="flex flex-col items-center justify-start space-y-8 max-w-2xl w-full">
        <!-- The main card element -->
        <div id="card" class="card-container bg-white border-2 border-gray-300 rounded-2xl shadow-xl flex flex-col justify-between items-start p-6 text-gray-800 relative">
            <div id="card-top-left" class="absolute top-4 left-4 text-center">
                <div id="rank-top" class="text-6xl md:text-7xl font-bold leading-none"></div>
                <div id="suit-top" class="text-4xl md:text-5xl leading-none"></div>
            </div>
            <div id="card-center" class="absolute inset-0 flex items-center justify-center text-8xl font-bold"></div>
            <div id="card-bottom-right" class="absolute bottom-4 right-4 text-center transform rotate-180">
                <div id="rank-bottom" class="text-6xl md:text-7xl font-bold leading-none"></div>
                <div id="suit-bottom" class="text-4xl md:text-5xl leading-none"></div>
            </div>
        </div>
        
        <!-- The new text field -->
        <input type="text" id="mystery-input" autofocus class="bg-black border-2 border-gray-800 text-gray-800 rounded-md p-2 w-full max-w-[250px]">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Mnemonica stack order
            const mnemonicaStack = [
                "4♣", "2♥", "7♦", "3♣", "4♥", "6♦", "A♠", "5♥", "9♠", "2♠", "Q♥", "3♦",
                "Q♣", "8♥", "6♠", "5♠", "9♥", "K♣", "2♦", "J♥", "3♠", "8♠", "6♥", "10♣",
                "5♦", "K♦", "2♣", "3♥", "8♦", "5♣", "K♠", "J♦", "8♣", "10♠", "K♥", "J♣",
                "7♠", "10♥", "A♦", "4♠", "7♥", "4♦", "A♣", "9♣", "J♠", "Q♦", "7♣", "Q♠",
                "10♦", "6♣", "A♥", "9♦"
            ];
            
            const rankNames = {
                'A': 'ace', '2': 'two', '3': 'three', '4': 'four', '5': 'five', '6': 'six',
                '7': 'seven', '8': 'eight', '9': 'nine', '10': 'ten', 'J': 'jack', 'Q': 'queen',
                'K': 'king'
            };

            const suitNames = {
                '♣': 'clubs', '♥': 'hearts', '♦': 'diamonds', '♠': 'spades'
            };

            // Get all the relevant elements
            const cardElement = document.getElementById('card');
            const rankTopElement = document.getElementById('rank-top');
            const suitTopElement = document.getElementById('suit-top');
            const cardCenterElement = document.getElementById('card-center');
            const rankBottomElement = document.getElementById('rank-bottom');
            const suitBottomElement = document.getElementById('suit-bottom');
            const inputElement = document.getElementById('mystery-input');

            let currentIndex = -1;

            function getCardInfo(cardString) {
                const suit = cardString.slice(-1);
                const rank = cardString.slice(0, -1);
                return { rank, suit };
            }

            function displayCard(cardString) {
                const { rank, suit } = getCardInfo(cardString);
                const suitClass = (suit === '♦' || suit === '♥') ? 'red' : 'black';

                // Update all card elements
                rankTopElement.textContent = rank;
                suitTopElement.innerHTML = suit;
                rankBottomElement.textContent = rank;
                suitBottomElement.innerHTML = suit;
                cardCenterElement.textContent = suit;

                // Set the suit colors
                rankTopElement.className = `text-6xl md:text-7xl font-bold leading-none ${suitClass}`;
                suitTopElement.className = `text-4xl md:text-5xl leading-none ${suitClass}`;
                rankBottomElement.className = `text-6xl md:text-7xl font-bold leading-none ${suitClass}`;
                suitBottomElement.className = `text-4xl md:text-5xl leading-none ${suitClass}`;
                cardCenterElement.className = `absolute inset-0 flex items-center justify-center text-8xl font-bold ${suitClass}`;
            }

            function showRandomCard() {
                currentIndex = Math.floor(Math.random() * mnemonicaStack.length);
                displayCard(mnemonicaStack[currentIndex]);
            }

            function showNextCard() {
                currentIndex = (currentIndex + 1) % mnemonicaStack.length;
                displayCard(mnemonicaStack[currentIndex]);
            }
            
            cardElement.addEventListener('click', () => {
                showNextCard();
                inputElement.focus();
            });

            document.addEventListener('click', (event) => {
                // If the click is not on the card element or the input field itself, focus the input
                if (!cardElement.contains(event.target) && event.target !== inputElement) {
                    inputElement.focus();
                }
            });

            // Listen for input to check for card names
            inputElement.addEventListener('input', () => {
                const inputValue = inputElement.value.toLowerCase();
                const nextIndex = (currentIndex + 1) % mnemonicaStack.length;
                const nextCardString = mnemonicaStack[nextIndex];
                const { rank, suit } = getCardInfo(nextCardString);

                const rankName = rankNames[rank];
                const suitName = suitNames[suit];
                
                const fullCardName = `${rankName} of ${suitName}`;
                const altCardName = `${rank.toLowerCase()} of ${suitName}`;
                
                // Check if the input value ends with either the full name or the alternate name
                if (inputValue.endsWith(fullCardName) || inputValue.endsWith(altCardName)) {
                    showNextCard();
                }
            });

            // Initial load
            showRandomCard();
        });
    </script>
</body>
</html>
